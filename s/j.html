<html>
<head>
    <title>井字棋</title>
    <style type="text/css">
        canvas {
            border: 2px solid rgb(127,127,127);
        }
    </style>
</head>
<div style="display: flex;">
    <canvas id="j" width="203" height="203" onclick="db()"></canvas>
    <div id='win' style="width: 100px;height: 21px;padding-top: 91px;padding-bottom: 91px;text-align: center;"></div>
</div>
</body>
<script type="text/javascript">
var wait=0;
var x;
var y;
var a_1=0;
var a_2=0;
var a_3=0;
var a_4=0;
var a_5=0;
var a_6=0;
var a_7=0;
var a_8=0;
var a_9=0;
var chess=new Array(2,2,2,2,2,2,2,2,2);
function draw(){
    var canvas = document.getElementById('j');
    if(!canvas.getContext) return;
    var p = canvas.getContext("2d");
    p.beginPath();
    p.moveTo(63,0);
    p.lineTo(63,63);
    p.lineTo(0,63);
    p.moveTo(0,70);
    p.lineTo(63,70);
    p.lineTo(63,133);
    p.lineTo(0,133);
    p.moveTo(0,140);
    p.lineTo(63,140);
    p.lineTo(63,203);
    p.moveTo(70,0);
    p.lineTo(70,63);
    p.lineTo(133,63);
    p.lineTo(133,0);
    p.moveTo(70,70);
    p.lineTo(133,70);
    p.lineTo(133,133);
    p.lineTo(70,133);
    p.lineTo(70,70)
    p.moveTo(70,203);
    p.lineTo(70,140);
    p.lineTo(133,140);
    p.lineTo(133,203);
    p.moveTo(140,0);
    p.lineTo(140,63);
    p.lineTo(203,63);
    p.moveTo(203,70);
    p.lineTo(140,70);
    p.lineTo(140,133);
    p.lineTo(203,133);
    p.moveTo(140,203);
    p.lineTo(140,140);
    p.lineTo(203,140);
    p.moveTo(63,0);
    p.closePath();
    p.stroke();
    p.beginPath();
    p.closePath();
    p.stroke();
    p.beginPath();
    p.closePath();
    p.stroke();
}
draw();
function bn(x,y){
    var canvas = document.getElementById('j');
    if(!canvas.getContext) return;
    var p = canvas.getContext("2d");
    p.beginPath();
    p.moveTo(x-19.455,y+13.3275);
    p.lineTo (x-13.3275,y+19.455);
    p.lineTo (x,y+6.128);
    p.lineTo (x+13.3275,y+19.455);
    p.lineTo (x+19.455,y+13.3275);
    p.lineTo (x+6.128,y);
    p.lineTo (x+19.455,y-13.3275);
    p.lineTo (x+13.3275,y-19.455);
    p.lineTo (x,y-6.128);
    p.lineTo (x-13.3275,y-19.455);
    p.lineTo (x-19.455,y-13.3275);
    p.lineTo (x-6.128,y);
    p.lineTo (x-19.455,y+13.3275);
    p.closePath();
    p.stroke();
}
function o(x,y){
    var canvas = document.getElementById('j');
    if(!canvas.getContext) return;
    var p = canvas.getContext("2d");
    p.beginPath();
    p.arc(x,y,16.9442,0,2*Math.PI);
    p.closePath();
    p.stroke();
    p.beginPath();
    p.arc(x,y,23.5825,0,2*Math.PI);
    p.closePath();
    p.stroke();
}
function db(){
    x=event.clientX-8;
    y=event.clientY-8;
    if(a_1==0){
        if(x>=0 && x<=63 && y>=0 && y<=63){if(wait==1){bn(31.5,31.5);wait=0;chess[0]=0;}else{o(31.5,31.5);wait=1;chess[0]=1;}a_1=1;}
    }
    if(a_2==0){
        if(x>=70 && x<=133 && y>=0 && y<=63){if(wait==1){bn(101.5,31.5);wait=0;chess[1]=0;}else{o(101.5,31.5);wait=1;chess[1]=1;}a_2=1;}
    }
    if(a_3==0){
        if(x>=140 && x<=203 && y>=0 && y<=63){if(wait==1){bn(171.5,31.5);wait=0;chess[2]=0;}else{o(171.5,31.5);wait=1;chess[2]=1;}a_3=1;}
    }
    
    if(a_4==0){
        if(x>=0 && x<=63 && y>=70 && y<=133){if(wait==1){bn(31.5,101.5);wait=0;chess[3]=0;}else{o(31.5,101.5);wait=1;chess[3]=1;}a_4=1;}
    }
    if(a_5==0){
        if(x>=70 && x<=133 && y>=70 && y<=133){if(wait==1){bn(101.5,101.5);wait=0;chess[4]=0;}else{o(101.5,101.5);wait=1;chess[4]=1;}a_5=1;}
    }
    if(a_6==0){
        if(x>=140 && x<=203 && y>=70 && y<=133){if(wait==1){bn(171.5,101.5);wait=0;chess[5]=0;}else{o(171.5,101.5);wait=1;chess[5]=1;}a_6=1;}
    }
    
    if(a_7==0){
        if(x>=0 && x<=63 && y>=140 && y<=203){if(wait==1){bn(31.5,171.5);wait=0;chess[6]=0;}else{o(31.5,171.5);wait=1;chess[6]=1;}a_7=1;}
    }
    if(a_8==0){
        if(x>=70 && x<=133 && y>=140 && y<=203){if(wait==1){bn(101.5,171.5);wait=0;chess[7]=0;}else{o(101.5,171.5);wait=1;chess[7]=1;}a_8=1;}
    }
    if(a_9==0){
        if(x>=140 && x<=203 && y>=140 && y<=203){if(wait==1){bn(171.5,171.5);wait=0;chess[8]=0;}else{o(171.5,171.5);wait=1;chess[8]=1;}a_9=1;}
    }
    abc();
}
function abc(){
    var win
    function m(x1,y1,x2,y2){
        var canvas = document.getElementById('j');
        if(!canvas.getContext) return;
        var p = canvas.getContext("2d");
        p.beginPath();
        p.moveTo((7*(x1-1)+63*x1-31.5),(7*(y1-1)+63*y1-31.5));
        p.lineTo((7*(x2-1)+63*x2-31.5),(7*(y2-1)+63*y2-31.5));
        p.closePath();
        p.stroke();
    }
    if (chess[0]==chess[1]&&chess[1]==chess[2]&&chess[2]!=2&&chess[0]!=2&&chess[1]!=2){m(1,1,3,1);win=chess[0]}
    if (chess[3]==chess[4]&&chess[4]==chess[5]&&chess[5]!=2&&chess[3]!=2&&chess[4]!=2){m(1,2,3,2);win=chess[3]}
    if (chess[6]==chess[7]&&chess[7]==chess[8]&&chess[8]!=2&&chess[6]!=2&&chess[7]!=2){m(1,3,3,3);win=chess[6]}

    if (chess[0]==chess[3]&&chess[3]==chess[6]&&chess[6]!=2&&chess[0]!=2&&chess[3]!=2){m(1,1,1,3);win=chess[0]}
    if (chess[1]==chess[4]&&chess[4]==chess[7]&&chess[7]!=2&&chess[1]!=2&&chess[4]!=2){m(2,1,2,3);win=chess[1]}
    if (chess[2]==chess[5]&&chess[5]==chess[8]&&chess[8]!=2&&chess[2]!=2&&chess[5]!=2){m(3,1,3,3);win=chess[2]}

    if (chess[2]==chess[4]&&chess[4]==chess[6]&&chess[6]!=2&&chess[2]!=2&&chess[4]!=2){m(3,1,1,3);win=chess[2]}
    if (chess[0]==chess[4]&&chess[4]==chess[8]&&chess[8]!=2&&chess[0]!=2&&chess[4]!=2){m(1,1,3,3);win=chess[0]}

    if(win==1){wi(0)}
    if(win==0){wi(1)}
}
function wi(x){
    if(x==0){document.getElementById('win').innerHTML="胜方：&#11093"}
    if(x==1){document.getElementById('win').innerHTML="胜方：&#10006"}
}
</script>
</html>
